<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <button id="btn">Get All</button>
    <script src="script.js"></script>
  </body>
</html> -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SQLite Demo</title>
</head>
<body>
  <h1>SQLite Demo</h1>
  <button id="btnGetUsers">Get Users</button>
  <script src="script.js"></script>
</body>
</html> -->
<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Users</title>
  <script src="script.js"></script>
</head>
<body>
  <h1>Users</h1>
  <button id="btnGetUsers">Get Users</button>
  <button id="btn">Get All</button>
  <ul id="userList"></ul>
</body>
</html> -->

<!-- <script>
    document.getElementById('btnGetUsers').addEventListener('click', () => {
      fetch('http://localhost:3000/users')
        .then(response => response.json())
        .then(data => {
          const userList = document.getElementById('userList');
          userList.innerHTML = ''; // Effacer la liste précédente avant d'ajouter les nouveaux utilisateurs
          data.forEach(user => {
            const listItem = document.createElement('li');
            listItem.textContent = `Username: ${user.username}, Password: ${user.password}`;
            userList.appendChild(listItem);
          });
        })
        .catch(error => {
          console.error(error);
        });
    });
  </script> -->


  // const btnElt = document.getElementById('btn');

// btnElt.addEventListener('click', () => {
//   fetch('http://localhost:3000/')
//   .then(res => res.json())
//   .then(data => console.log(data))
//   .catch(error => console.error(error));
// });
// document.getElementById('btnGetUsers').addEventListener('click', () => {
//   fetch('/users')
//     .then(response => response.json())
//     .then(data => {
//       console.log('Utilisateurs:', data);
//     })
//     .catch(error => {
//       console.error(error);
//     });
// });



// fetch('http://localhost:3000/users')
//       .then(response => response.json())
//       .then(data => {
//         const userList = document.getElementById('userList');
//         data.forEach(user => {
//           const listItem = document.createElement('li');
//           listItem.textContent = `Username: ${user.username}, Password: ${user.password}`;
//           userList.appendChild(listItem);
//         });
//       })
//       .catch(error => {
//         console.error(error);
//       });

// const btnGetUsers = document.getElementById('btnGetUsers');

// btnGetUsers.addEventListener('click', () => {
//   fetch('http://localhost:3000/users')
//     .then(response => response.json())
//     .then(data => {
//       console.log('Utilisateurs:', data);
//       const userList = document.getElementById('userList');
//       userList.innerHTML = ''; // Effacer la liste précédente avant d'ajouter les nouveaux utilisateurs
//       data.forEach(user => {
//         const item = document.createElement('li');
//         item.textContent = `Username: ${user.username}, Password: ${user.password}`;
//         userList.appendChild(item);
//       });
//     })
//     .catch(error => {
//       console.error(error);
//     });
// });

// // const sqlite3 = require('sqlite3').verbose();
// // const express = require('express');
// // const cors = require('cors')

// // const app = express();

// // app.use(cors());

// // const db = new sqlite3.Database('db.sql');

// // db.serialize(() => {
// //   db.run('CREATE TABLE IF NOT EXISTS user (username TEXT UNIQUE, password TEXT)');
// // })

// // app.get('/', (req, res) => {
// //   db.all('SELECT * FROM user', (err, rows) => {
// //     if (err) {
// //       res.status(500).json({ error: err.message });
// //     } else {
// //     res.status(200).json(rows);
// //     }
// //   });
// // })


// // app.use(express.json());

// // app.post('/create', (req, res) => {
// //   const body = req.body;
// //   console.log(body)
// //   db.run(`INSERT INTO user(username, password) VALUES  (?, ?)`, [body.username, body.password], (err) => {
// //     if (err) {
// //       res.status(500).json({ error: err.message });
// //     } else {
// //       res.status(201).json({ message: 'User created' });
// //     }
// //   });
// // });

// // app.listen('3000', () => {
// //   console.log('Hello, World')
// // })
// const sqlite3 = require('sqlite3').verbose();
// const express = require('express');
// const cors = require('cors');

// const app = express();

// app.use(cors());

// const db = new sqlite3.Database('db.sql');

// db.serialize(() => {
//   db.run('CREATE TABLE IF NOT EXISTS user (username TEXT UNIQUE, password TEXT)');
// });

// app.get('/', (req, res) => {
//   db.all('SELECT * FROM user', (err, rows) => {
//     if (err) {
//       res.status(500).json({ error: err.message });
//     } else {
//       res.setHeader('Access-Control-Allow-Origin', '*'); // Ajout de l'en-tête CORS pour autoriser toutes les origines
//       res.status(200).json(rows);
//     }
//   });
// });

// app.use(express.json());

// app.post('/create', (req, res) => {
//   const body = req.body;
//   console.log(body);
//   db.run(`INSERT INTO user(username, password) VALUES (?, ?)`, [body.username, body.password], (err) => {
//     if (err) {
//       res.status(500).json({ error: err.message });
//     } else {
//       res.setHeader('Access-Control-Allow-Origin', '*'); // Ajout de l'en-tête CORS pour autoriser toutes les origines
//       res.status(201).json({ message: 'User created' });
//     }
//   });
// });

// app.listen(3000, () => {
//   console.log('Hello, World');
// });


// const sqlite3 = require('sqlite3').verbose();
// const express = require('express');
// const cors = require('cors');

// const app = express();

// app.use(cors());

// const db = new sqlite3.Database('db.sql');

// db.serialize(() => {
//   db.run('CREATE TABLE IF NOT EXISTS user (username TEXT UNIQUE, password TEXT)');
// });

// app.get('/', (req, res) => {
//   db.all('SELECT * FROM user', (err, rows) => {
//     if (err) {
//       res.status(500).json({ error: err.message });
//     } else {
//       res.setHeader('Access-Control-Allow-Origin', '*'); // Ajout de l'en-tête CORS pour autoriser toutes les origines
//       res.status(200).json(rows);
//     }
//   });
// });

// app.use(express.json());

// app.post('/create', (req, res) => {
//   const body = req.body;
//   console.log(body);
//   db.run('INSERT INTO user(username, password) VALUES (?, ?)', [body.username, body.password], (err) => {
//     if (err) {
//       res.status(500).json({ error: err.message });
//     } else {
//       res.setHeader('Access-Control-Allow-Origin', '*'); // Ajout de l'en-tête CORS pour autoriser toutes les origines
//       res.status(201).json({ message: 'User created' });
//     }
//   });
// });

// app.listen(3000, () => {
//   console.log('Hello, World');
// });

// const sqlite3 = require('sqlite3').verbose(); // Importer le module SQLite3

// // Créer une instance de la base de données SQLite en mémoire
// const db = new sqlite3.Database(':memory:');

// // Créer une table "users" avec deux colonnes : "username" et "password"
// db.serialize(() => {
//   db.run('CREATE TABLE IF NOT EXISTS users (username TEXT, password TEXT)');
// });

// // Ajouter un utilisateur à la base de données
// db.serialize(() => {
//   const username = 'john';
//   const password = 'password123';

//   // Exécuter une requête SQL pour insérer un utilisateur dans la table "users"
//   db.run(`INSERT INTO users (username, password) VALUES (?, ?)`, [username, password], (err) => {
//     if (err) {
//       console.error(err);
//     } else {
//       console.log('Utilisateur ajouté avec succès !');
//     }
//   });
// });

// // Récupérer tous les utilisateurs de la base de données
// db.serialize(() => {
//   // Exécuter une requête SQL pour récupérer tous les utilisateurs de la table "users"
//   db.all('SELECT * FROM users', (err, rows) => {
//     if (err) {
//       console.error(err);
//     } else {
//       console.log('Utilisateurs :', rows);
//     }
//   });
// });

// // Fermer la connexion à la base de données
// db.close();

// const sqlite3 = require('sqlite3').verbose();

// const db = new sqlite3.Database(':memory:');

// db.serialize(() => {
//   db.run('CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT, password TEXT)');

//   db.run(`INSERT INTO users (username, password) VALUES ('john', 'password123')`);
//   db.run(`INSERT INTO users (username, password) VALUES ('jane', 'password456')`);
// });

// db.all('SELECT * FROM users', (err, rows) => {
//   if (err) {
//     console.error(err);
//   } else {
//     console.log('Utilisateurs :', rows);
//   }
// });

// db.close();


// const express = require('express');
// const sqlite3 = require('sqlite3').verbose();

// const app = express();
// const db = new sqlite3.Database(':memory:');

// db.serialize(() => {
//   db.run('CREATE TABLE IF NOT EXISTS users (id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT, password TEXT)');

//   db.run(`INSERT INTO users (username, password) VALUES ('john', 'password123')`);
//   db.run(`INSERT INTO users (username, password) VALUES ('jane', 'password456')`);
// });

// app.get('/users', (req, res) => {
//   db.all('SELECT * FROM users', (err, rows) => {
//     if (err) {
//       res.status(500).json({ error: err.message });
//     } else {
//       res.status(200).json(rows);
//     }
//   });
// });

// app.listen(3000, () => {
//   console.log('Server is running on port 3000');
// });


// const sqlite3 = require('sqlite3').verbose();

// // Création de la connexion à la base de données en mémoire
// const db = new sqlite3.Database(':memory:');

// // Exemple de requête pour créer une table
// const createTableQuery = `
//     CREATE TABLE users (
//         id INTEGER PRIMARY KEY AUTOINCREMENT,
//         name TEXT NOT NULL,
//         email TEXT NOT NULL UNIQUE
//     )
// `;

// // Exécution de la requête de création de table
// db.run(createTableQuery, (error) => {
//     if (error) {
//         console.error('Erreur lors de la création de la table :', error.message);
//     } else {
//         console.log('Table créée avec succès');
//     }
// });

// // Fermeture de la connexion à la base de données
// db.close((error) => {
//     if (error) {
//         console.error('Erreur lors de la fermeture de la connexion :', error.message);
//     } else {
//         console.log('Connexion fermée avec succès');
//     }
// });

// const sqlite3 = require('sqlite3').verbose();

// // Création de la connexion à la base de données en mémoire
// const db = new sqlite3.Database(':memory:');

// // Création de la table "users" (à adapter selon vos besoins)
// const createTableQuery = `
//     CREATE TABLE IF NOT EXISTS users (
//         id INTEGER PRIMARY KEY AUTOINCREMENT,
//         username TEXT NOT NULL,
//         password TEXT NOT NULL
//     )
// `;

// db.serialize(() => {
//   // Exécution de la requête de création de table
//   db.run(createTableQuery, (error) => {
//     if (error) {
//       console.error('Erreur lors de la création de la table :', error.message);
//     } else {
//       console.log('Table créée avec succès');

//       // Insertion de données dans la table
//       const insertDataQuery = `
//         INSERT INTO users (username, password)
//         VALUES ('john', 'password123'),
//                ('jane', 'password456')
//       `;
      
//       db.run(insertDataQuery, (error) => {
//         if (error) {
//           console.error('Erreur lors de l\'insertion des données :', error.message);
//         } else {
//           console.log('Données insérées avec succès');

//           // Sélection de toutes les lignes de la table
//           const selectDataQuery = 'SELECT * FROM users';

//           db.all(selectDataQuery, (error, rows) => {
//             if (error) {
//               console.error('Erreur lors de la sélection des données :', error.message);
//             } else {
//               console.log('Données sélectionnées avec succès');
//               console.log(rows);
//             }

//             // Fermeture de la connexion à la base de données
//             db.close((error) => {
//               if (error) {
//                 console.error('Erreur lors de la fermeture de la connexion :', error.message);
//               } else {
//                 console.log('Connexion fermée avec succès');
//               }
//             });
//           });
//         }
//       });


//     }
//   });
// });